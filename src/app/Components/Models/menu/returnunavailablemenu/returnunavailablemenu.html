<div *ngIf="apiMessage" 
     [ngClass]="{'alert': true, 'success': apiMessageType==='success', 'error': apiMessageType==='error'}"
     style="margin: 0 auto 20px; text-align: center;">
  {{ apiMessage }}
</div>

<div class="search-container" *ngIf="menus.length>0">
  <div class="search-box">
    <input [(ngModel)]="name" placeholder="بحث بإسم المينيو" type="text">
    <button (click)="search(name)" class="btn btn-primary"><i class="bi bi-search"></i> بحث</button>
  </div>
</div>

<div class="text-center w-100" *ngIf="loading">
  <app-spinner></app-spinner>
</div>

<div *ngIf="menus.length==0 && !loading" class="empty-cart">
  <h3>لا يوجد أى مينيو غير متاح حتى الأن</h3>
</div>

<div class="row g-4" *ngIf="!loading && menus.length>0"> 
  <div class="col-lg-4 col-md-6 col-sm-12" *ngFor="let menu of menus"> 
    <div class="card h-100 shadow-sm menu-card"> 
      <div class="card-header bg-card-header text-white d-flex justify-content-between align-items-center">
        <h5 class="card-title mb-0">{{ menu.name }}</h5>
      </div>

      <div class="card-body">
        <p class="card-text text-muted">{{ menu.description || 'لا يوجد وصف متاح.' }}</p>
        <ul class="list-group list-group-flush border-top border-bottom my-3">
          <li class="list-group-item d-flex justify-content-between align-items-center bg-transparent">
            <strong>الفئة:</strong>
            <span class="badge text-bg-info category-badge">{{ menu.categoryName }}</span>
          </li>
        </ul>

        <div class="card-footer bg-card-footer">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <strong>التوافر:</strong>
            <span 
              class="status-pill"
              [class.status-available]="menu.isAvailable" 
              [class.status-unavailable]="!menu.isAvailable"
            >
              {{ menu.isAvailable ? 'متاح' : 'غير متاح' }}
            </span>
          </div>
        </div>

<div class="d-flex flex-wrap gap-2 justify-content-end" *ngIf="menus.length>0">
  <button *ngIf="isMenuFullyUnavailable(menu)"
          (click)="addmenuitem(menu.id)" 
          class="btn btn-sm btn-outline-success flex-grow-1">
    <i class="bi bi-plus-circle"></i> إضافة عناصر للمينيو
  </button>
  <button *ngIf="!isMenuFullyUnavailable(menu)"
          (click)="availablemenubyid(menu.id)" 
          class="btn btn-sm btn-outline-success flex-grow-1">
    <i class="bi bi-check-circle"></i> إجعله متاح الأن
  </button>
</div>
      </div>
    </div>
  </div>
</div>
